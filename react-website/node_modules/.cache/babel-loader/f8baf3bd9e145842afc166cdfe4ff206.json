{"ast":null,"code":"import _slicedToArray from\"/Users/wwang/student--shallbuytwo/final/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from'react';import{fetchLogin,fetchRegister,fetchLogout}from'./fake-services/fake-services';import'./User.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function User(_ref){var currentUser=_ref.currentUser,setCurrentUser=_ref.setCurrentUser;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),statusMessage=_useState2[0],setStatusMessage=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),loginName=_useState4[0],setLoginName=_useState4[1];function handleLogin(event){event.preventDefault();if(currentUser){setStatusMessage(\"Login unsuccessful - already logged in\");return;}fetchLogin(loginName).then(function(response){setStatusMessage(\"Login successful - \"+loginName);setCurrentUser(loginName);}).catch(function(response){setStatusMessage(response[\"error\"]+\" - \"+loginName);});}var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),registerName=_useState6[0],setRegisterName=_useState6[1];function handleRegister(event){event.preventDefault();fetchRegister({username:registerName,password:\"\"})// let password always be empty\n.then(function(response){setStatusMessage(\"Register successful - \"+registerName);}).catch(function(response){setStatusMessage(response[\"error\"]+\" - \"+registerName);});}function handleLogout(event){event.preventDefault();if(!currentUser){setStatusMessage(\"Logout unsuccessful - not logged in\");return;}fetchLogout();setCurrentUser(\"\");setStatusMessage(\"Logout successful\");}return/*#__PURE__*/_jsxs(\"div\",{className:\"user\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Here you can register a username, login via a username, or logout.\"}),/*#__PURE__*/_jsx(\"p\",{children:\"We only use username but not password, not due to our backend service's inability to handle password, but due to Pao Pao's generosity.\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"status-msg\",children:[\"Status message (if any): \",statusMessage]}),/*#__PURE__*/_jsxs(\"div\",{className:\"functionalities\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"login\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"login-form\",onSubmit:handleLogin,children:[/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Login User Name:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"name\",value:loginName,onChange:function onChange(e){return setLoginName(e.target.value);},required:true})]}),/*#__PURE__*/_jsx(\"div\",{className:\"submit-button-div\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Login\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"register\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"register-form\",onSubmit:handleRegister,children:[/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Register A New User Name:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"name\",value:registerName,onChange:function onChange(e){return setRegisterName(e.target.value);},required:true})]}),/*#__PURE__*/_jsx(\"div\",{className:\"submit-button-div\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Register\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"logout\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",onClick:handleLogout,children:\"Logout Current User\"})})]})]});}export default User;","map":{"version":3,"sources":["/Users/wwang/student--shallbuytwo/final/src/User.jsx"],"names":["useState","fetchLogin","fetchRegister","fetchLogout","User","currentUser","setCurrentUser","statusMessage","setStatusMessage","loginName","setLoginName","handleLogin","event","preventDefault","then","response","catch","registerName","setRegisterName","handleRegister","username","password","handleLogout","e","target","value"],"mappings":"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","sourcesContent":["import { useState } from 'react';\nimport { fetchLogin, fetchRegister, fetchLogout } from './fake-services/fake-services'\nimport './User.css';\n\nfunction User({currentUser, setCurrentUser}) {\n\tconst [statusMessage, setStatusMessage] = useState(\"\");\n\n\tconst [loginName, setLoginName] = useState(\"\");\n\tfunction handleLogin(event) {\n\t\tevent.preventDefault();\n\t\tif (currentUser) {\n\t\t\tsetStatusMessage(\"Login unsuccessful - already logged in\");\n\t\t\treturn;\n\t\t}\n\n\t\tfetchLogin(loginName)\n\t\t.then( response => {\n\t\t\tsetStatusMessage(\"Login successful - \" + loginName);\n\t\t\tsetCurrentUser(loginName);\n\t\t})\n\t\t.catch( response => {\n\t\t\tsetStatusMessage(response[\"error\"] + \" - \" + loginName);\n\t\t});\n\t}\n\n\tconst [registerName, setRegisterName] = useState(\"\");\n\tfunction handleRegister(event) {\n\t\tevent.preventDefault();\n\t\tfetchRegister({username: registerName, password: \"\"}) // let password always be empty\n\t\t.then( response => {\n\t\t\tsetStatusMessage(\"Register successful - \" + registerName);\n\t\t})\n\t\t.catch( response => {\n\t\t\tsetStatusMessage(response[\"error\"] + \" - \" + registerName)\n\t\t});\n\t}\n\n\tfunction handleLogout(event) {\n\t\tevent.preventDefault();\n\t\tif (!currentUser) {\n\t\t\tsetStatusMessage(\"Logout unsuccessful - not logged in\");\n\t\t\treturn;\t\t\t\n\t\t}\n\t\tfetchLogout();\n\t\tsetCurrentUser(\"\");\n\t\tsetStatusMessage(\"Logout successful\");\n\t}\n\n\treturn (\n\t\t<div className=\"user\">\n\t\t\t<p>Here you can register a username, login via a username, or logout.</p>\n\n\t\t\t<p>We only use username but not password, not due to our backend service's inability to handle password, but due to Pao Pao's generosity.</p>\n\n\t\t\t<p className=\"status-msg\">Status message (if any): {statusMessage}</p>\n\n\t\t\t<div className=\"functionalities\">\n\t\t\t\t<div className=\"login\">\n\t\t\t\t\t<form className=\"login-form\" onSubmit={handleLogin}>\n\t\t\t\t\t\t<label><span>Login User Name:</span><input type=\"name\" value={loginName} onChange={ (e) => setLoginName(e.target.value) } required/></label>\n\t\t\t\t\t\t<div className=\"submit-button-div\">\n\t          \t\t\t\t<button type=\"submit\">Login</button>\n\t        \t\t\t</div>\n        \t\t\t</form>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"register\">\n\t\t\t\t\t<form className=\"register-form\" onSubmit={handleRegister}>\n\t\t\t\t\t\t<label><span>Register A New User Name:</span><input type=\"name\" value={registerName} onChange={ (e) => setRegisterName(e.target.value) } required/></label>\n\t\t\t\t\t\t<div className=\"submit-button-div\">\n\t          \t\t\t\t<button type=\"submit\">Register</button>\n\t        \t\t\t</div>\n        \t\t\t</form>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"logout\">\n\t          \t\t<button type=\"submit\" onClick={handleLogout}>Logout Current User</button>\n\t\t\t\t</div>\t\t\t\t\t\t\t\t\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default User;"]},"metadata":{},"sourceType":"module"}