{"ast":null,"code":"import _objectSpread from\"/Users/wwang/student--shallbuytwo/final/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";/* original Copyright Brett Ritter, 2021.  Available for use, modification, and redistribution under the terms of the MIT License */var RESOLVE_TIMEOUT_MSEC=100;var recordsForSet={};var users={cat:{username:'cat',access:'user',profile:{}},dog:{username:'dog'// This user will always fail!\n},admin:{username:'admin',access:'admin',profile:{}}};var getNextId=function generateId(){var currentId=1;return function(){return(currentId++).toString();};}();function pinkySwear(){var _ref=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},value=_ref.value,withError=_ref.withError;// Returns a promise that resolves with value in RESOLVE_TIMEOUT_MSEC\nvar resolve;var reject;var promise=new Promise(function(res,rej){resolve=res;reject=rej;});setTimeout(function(){if(withError){reject({error:withError});}else{resolve(value);}},RESOLVE_TIMEOUT_MSEC);return promise;}export function fetchLogin(username){// We ignore passwords because security is outside scope of course\nif(username==='dog'){return pinkySwear({withError:'invalidPassword'});}if(!users[username]){return pinkySwear({withError:'noSuchUser'});}// returns a copy of the stored values\n// uses a copy so app can't change stored values by changing these varibles\nreturn pinkySwear({value:_objectSpread(_objectSpread({},users[username]),{},{profile:_objectSpread({},users[username].profile)})});}export function fetchLogout(){return pinkySwear({value:{username:''}});}export function fetchRegister(_ref2){var username=_ref2.username,password=_ref2.password,_ref2$access=_ref2.access,access=_ref2$access===void 0?'user':_ref2$access,_ref2$profile=_ref2.profile,profile=_ref2$profile===void 0?{}:_ref2$profile;if(users[username]){return pinkySwear({withError:'userExists'});}return pinkySwear().then(function(){users[username]={username:username,access:access,profile:_objectSpread({},profile)};return{username:username,access:access,profile:_objectSpread({},profile)};});}export function fetchUpdateUser(_ref3){var username=_ref3.username,access=_ref3.access,profile=_ref3.profile;if(!users[username]){return pinkySwear({withError:'noSuchUser'});}return pinkySwear().then(function(){users[username].access=access!==null&&access!==void 0?access:users[username].access;users[username].profile=_objectSpread(_objectSpread({},users[username].profile),profile);return _objectSpread(_objectSpread({},users[username]),{},{profile:_objectSpread({},users[username].profile)});});}export function fetchCheckUsername(username){return pinkySwear().then(function(){if(users[username]){return{result:'exists'};}return{result:'new'};});}export function fetchCreateRecord(set,partial){recordsForSet[set]=recordsForSet[set]||{};return pinkySwear().then(function(){var id=getNextId();recordsForSet[set][id]=_objectSpread(_objectSpread({},partial),{},{id:id});return recordsForSet[set][id];});}export function fetchReplaceRecord(set,record){recordsForSet[set]=recordsForSet[set]||{};var id=record.id;if(!recordsForSet[set][id]){return pinkySwear({withError:'noSuchRecord'});}return pinkySwear().then(function(){recordsForSet[set][id]=_objectSpread(_objectSpread({},record),{},{id:id});return recordsForSet[set][id];});}export function fetchRecordById(set,id){recordsForSet[set]=recordsForSet[set]||{};if(!recordsForSet[set][id]){return pinkySwear({withError:'noSuchRecord'});}return pinkySwear().then(function(){return recordsForSet[set][id];});}export function fetchDeleteRecord(set,id){recordsForSet[set]=recordsForSet[set]||{};if(!recordsForSet[set][id]){return pinkySwear({value:'noSuchRecord'});}return pinkySwear().then(function(){delete recordsForSet[set][id];return'recordDeleted';});}export function fetchUpdateRecord(set,partial){recordsForSet[set]=recordsForSet[set]||{};var id=partial.id;if(!recordsForSet[set][id]){return pinkySwear({withError:'noSuchRecord'});}return pinkySwear().then(function(){recordsForSet[set][id]=_objectSpread(_objectSpread(_objectSpread({},recordsForSet[set][id]),partial),{},{id:id});return recordsForSet[set][id];});}export function fetchRecords(set){recordsForSet[set]=recordsForSet[set]||{};return pinkySwear().then(function(){return Object.keys(recordsForSet[set]);});}","map":{"version":3,"sources":["/Users/wwang/student--shallbuytwo/final/src/fake-services/fake-services.js"],"names":["RESOLVE_TIMEOUT_MSEC","recordsForSet","users","cat","username","access","profile","dog","admin","getNextId","generateId","currentId","toString","pinkySwear","value","withError","resolve","reject","promise","Promise","res","rej","setTimeout","error","fetchLogin","fetchLogout","fetchRegister","password","then","fetchUpdateUser","fetchCheckUsername","result","fetchCreateRecord","set","partial","id","fetchReplaceRecord","record","fetchRecordById","fetchDeleteRecord","fetchUpdateRecord","fetchRecords","Object","keys"],"mappings":"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","sourcesContent":["/* original Copyright Brett Ritter, 2021.  Available for use, modification, and redistribution under the terms of the MIT License */\n\nconst RESOLVE_TIMEOUT_MSEC = 100;\n\nconst recordsForSet= {};\nconst users = {\n  cat: {\n    username: 'cat',\n    access: 'user',\n    profile: {},\n  },\n  dog: {\n    username: 'dog',\n    // This user will always fail!\n  },\n  admin: {\n    username: 'admin',\n    access: 'admin',\n    profile: {},\n  },\n};\n\nconst getNextId = (\n  function generateId() {\n    let currentId = 1;\n    return () => (currentId++).toString();\n  }\n)();\n\n\nfunction pinkySwear({ value, withError }={}) {\n  // Returns a promise that resolves with value in RESOLVE_TIMEOUT_MSEC\n  let resolve;\n  let reject\n  const promise = new Promise( (res, rej) => {\n    resolve = res;\n    reject = rej\n  });\n  setTimeout(\n    () => {\n      if( withError ) {\n        reject({ error: withError });\n      } else {\n        resolve(value)\n      }\n    },\n    RESOLVE_TIMEOUT_MSEC\n  );\n  return promise;\n}\n\nexport function fetchLogin(username) {\n  // We ignore passwords because security is outside scope of course\n  if(username === 'dog') {\n    return pinkySwear({ withError: 'invalidPassword' });\n  }\n  if(!users[username]) {\n    return pinkySwear({ withError: 'noSuchUser' });\n  }\n  // returns a copy of the stored values\n  // uses a copy so app can't change stored values by changing these varibles\n  return pinkySwear({ value: { ...users[username], profile: { ...users[username].profile } }  });\n}\n\nexport function fetchLogout() {\n  return pinkySwear({ value: { username: '' } });\n}\n\nexport function fetchRegister({ username, password, access = 'user', profile = {} }) {\n  if(users[username]) {\n    return pinkySwear({ withError: 'userExists' });\n  }\n  return pinkySwear().then( () => {\n    users[username] = {\n      username,\n      access,\n      profile: { ...profile },\n    };\n    return {\n      username,\n      access,\n      profile: { ...profile },\n    };\n  });\n}\n\nexport function fetchUpdateUser({ username, access, profile }) {\n  if(!users[username]) {\n    return pinkySwear({ withError: 'noSuchUser' });\n  }\n  return pinkySwear().then( () => {\n    users[username].access = access ?? users[username].access;\n    users[username].profile = { ...users[username].profile, ...profile };\n    return {\n      ...users[username],\n      profile: { ...users[username].profile },\n    };\n  });\n}\n\nexport function fetchCheckUsername(username) {\n  return pinkySwear().then( () => {\n    if(users[username]) {\n      return { result: 'exists' };\n    }\n    return { result: 'new' };\n  });\n}\n\nexport function fetchCreateRecord(set, partial) {\n  recordsForSet[set] = recordsForSet[set] || {};\n  return pinkySwear().then( () => {\n    const id = getNextId();\n    recordsForSet[set][id] = {\n      ...partial,\n      id\n    };\n    return recordsForSet[set][id];\n  });\n}\n\nexport function fetchReplaceRecord(set, record) {\n  recordsForSet[set] = recordsForSet[set] || {};\n  const id = record.id;\n  if(!recordsForSet[set][id]) {\n    return pinkySwear({ withError: 'noSuchRecord' });\n  }\n  return pinkySwear().then( () => {\n    recordsForSet[set][id] = {\n      ...record,\n      id\n    };\n    return recordsForSet[set][id];\n  });\n}\n\nexport function fetchRecordById(set, id) {\n  recordsForSet[set] = recordsForSet[set] || {};\n  if(!recordsForSet[set][id]) {\n    return pinkySwear({ withError: 'noSuchRecord' });\n  }\n  return pinkySwear().then( () => {\n    return recordsForSet[set][id];\n  });\n}\n\nexport function fetchDeleteRecord(set, id) {\n  recordsForSet[set] = recordsForSet[set] || {};\n  if(!recordsForSet[set][id]) {\n    return pinkySwear({ value: 'noSuchRecord' });\n  }\n  return pinkySwear().then( () => {\n    delete recordsForSet[set][id];\n    return 'recordDeleted';\n  });\n}\n\nexport function fetchUpdateRecord(set, partial) {\n  recordsForSet[set] = recordsForSet[set] || {};\n  const id = partial.id;\n  if(!recordsForSet[set][id]) {\n    return pinkySwear({ withError: 'noSuchRecord' });\n  }\n  return pinkySwear().then( () => {\n    recordsForSet[set][id] = {\n      ...recordsForSet[set][id],\n      ...partial,\n      id\n    };\n    return recordsForSet[set][id];\n  });\n}\n\nexport function fetchRecords(set) {\n  recordsForSet[set] = recordsForSet[set] || {};\n  return pinkySwear().then( () => {\n    return Object.keys(recordsForSet[set]);\n  });\n}\n\n\n"]},"metadata":{},"sourceType":"module"}